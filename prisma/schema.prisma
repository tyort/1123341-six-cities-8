generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("NEXT_PUBLIC_DATABASE_URL")
}

model offer {
  id                 Int           @id @default(autoincrement())
  bedrooms           Int
  city               city          @relation(fields: [cityId], references: [id])
  cityId             Int
  host               host          @relation(fields: [hostId], references: [id])
  hostId             Int
  description        String
  goods              String[]
  images             String[]
  is_favorite        Boolean
  is_premium         Boolean
  offerLocation      offerLocation?
  max_adults         Int
  preview_image      String
  price              Int
  rating             Decimal       @db.Decimal(15, 1)
  title              String        @unique
  type               String
  comment            comment[]
}

model comment {
  id      Int        @id @default(autoincrement())
  date    DateTime   @default(now())
  comment String
  rating  Decimal    @db.Decimal(15, 1)
  user    host       @relation(fields: [userId], references: [id])
  userId  Int
  offer   offer      @relation(fields: [offerId], references: [id])
  offerId Int
}

model offerLocation {
  id        Int     @id @default(autoincrement())
  latitude  String
  longitude String
  zoom      Int
  offer     offer   @relation(fields: [offerId], references: [id])
  offerId   Int     @unique

  @@unique([latitude, longitude])
}

model city {
  id       Int       @id @default(autoincrement())
  location location? // нет в таблице этой колонки. Через createMany корректно не создадим
  name     String    @unique
  offer    offer[] // нет в таблице такой колонки
}

model location {
  latitude  String
  longitude String
  zoom      Int
  city      city    @relation(fields: [cityId], references: [id])
  cityId    Int     @unique

  @@id([latitude, longitude])
}

model host {
  id         Int     @id @default(autoincrement())
  avatar_url String
  is_pro     Boolean
  name       String  @unique
  offer      offer[]
  email      String @unique
  password   String
  comment    comment[]
}